import{c as p,k as u}from"./elm.7e6b5792.js";import{_ as f}from"./index.a1960522.js";import{ag as y,o as r,g as d,h as l,a2 as m,X as g,W as b,R as x,$ as w,a0 as v}from"./vendor.9fab5538.js";const B={name:"video-reader",props:{imgExist:{type:Boolean,default:!0}},data(){return{constraints:{audio:!1,video:!0},imgUrl:"",imgFile:""}},created(){this.getVedioStream()},methods:{getVedioStream(){navigator.mediaDevices.getUserMedia(this.constraints).then(e=>{var t=this.$refs["video-play"];t.srcObject=e,t.play()}).catch(e=>{console.log(e)})},getImg(){var e=this.$refs["video-play"];this.$refs["cut-img"];var t=document.createElement("canvas");t.width=e.videoWidth,t.height=e.videoHeight,console.log(),t.getContext("2d").drawImage(e,0,0,e.videoWidth,e.videoHeight);const s=t.toDataURL("image/png");this.imgUrl=s,this.imgFile=this.convertBase64UrlToImgFile(s,"cut.png","image/png"),console.log(this.imgFile)},convertBase64UrlToImgFile(e,t,n){e=e.replace(/^data:image\/\w+;base64,/,"");var s=window.atob(e),i=new ArrayBuffer(s.length),c=new Int8Array(i),o;for(o=0;o<s.length;o++)c[o]=s.charCodeAt(o);var a=new Blob([i],{type:n});return a.lastModifiedDate=new Date,a.name=t,a}}},k={class:"video-box"},V={ref:"video-play",class:"video-play"},U={key:0,class:"side-box"},$=v("\u5F55\u5236"),C={class:"img-box"},I=["src"],E={class:"btn-place"},F=v("\u9009\u5B9A");function N(e,t,n,s,i,c){const o=u,a=y("Picture"),_=p;return r(),d("div",k,[l("video",V,null,512),n.imgExist?(r(),d("div",U,[m(o,{class:"",type:"primary",onClick:t[0]||(t[0]=h=>c.getImg())},{default:g(()=>[$]),_:1}),l("div",C,[i.imgUrl?(r(),d("img",{key:0,src:i.imgUrl,ref:"cut-img"},null,8,I)):(r(),b(_,{key:1,class:"img-icon"},{default:g(()=>[m(a)]),_:1}))]),l("div",E,[m(o,{class:"",type:"success",onClick:t[1]||(t[1]=h=>e.$emit("choose-img",1))},{default:g(()=>[F]),_:1}),x(e.$slots,"second-btn")])])):w("",!0)])}var O=f(B,[["render",N]]);export{O as V};
//# sourceMappingURL=VideoReader.a7c299f2.js.map
