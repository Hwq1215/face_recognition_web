import{S as C,V as w,W as D,X as F,c as x,Y as B,U as E,k as R,v as S}from"./elm.7e6b5792.js";import{h as N}from"./config.f6d607cf.js";import{bJ as O,bI as P,ag as d,o as n,g as m,h as o,a2 as s,X as t,$ as b,W as c,Y as j,a0 as _,a1 as z,F as A}from"./vendor.9fab5538.js";import{V as T}from"./VideoReader.a7c299f2.js";import{_ as W}from"./index.a1960522.js";import"./lodash.8fc0361e.js";import"https://www.gstatic.com/firebasejs/9.8.4/firebase-app.js";import"https://www.gstatic.com/firebasejs/9.8.4/firebase-analytics.js";const X={name:"compareFace",data(){return{fileList1:[],fileList2:[],result:{is_same:!1,score:0},actionUrl:N+"/compare",img1Url:"",img2Url:"",DialogIsVisiable:!1,loadingVisible:!0,VideoDialogIsVisiable:!1,videoIndex:1}},watch:{fileList1(i){i.length>0&&(this.img1Url=URL.createObjectURL(i[0].raw))},fileList2(i){i.length>0&&(this.img2Url=URL.createObjectURL(i[0].raw))}},components:{IconPicture:C,SuccessFilled:w,CircleCloseFilled:D,Loading:F,VideoReader:T,CameraIcon:O},methods:{compare(){this.loadingVisible=!0,this.DialogIsVisiable=!0;let i=new FormData;if(console.log(this.fileList1),console.log(this.fileList2),this.fileList1.length==0||this.fileList2.length==0){this.$message.error("\u8BF7\u4E0A\u4F20\u56FE\u7247");return}i.append("img1",this.fileList1[0].raw),i.append("img2",this.fileList2[0].raw),P({method:"post",url:this.actionUrl,headers:{"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"*"},data:i}).then(l=>{if(console.log(l),this.result=l.data,l.status!=200){this.$message.error("\u6BD4\u5BF9\u5931\u8D25"),this.DialogIsVisiable=!1;return}if(console.log(this.result),this.result.score==-1){this.$message.error("\u6BD4\u5BF9\u5931\u8D25,\u6CA1\u6709\u627E\u5230\u4EBA\u8138"),this.DialogIsVisiable=!1;return}this.loadingVisible=!1})},clear(){this.fileList1=[],this.fileList2=[],this.img1Url="",this.img2Url=""},openVideo(i){console.log(i),this.videoIndex=i,this.VideoDialogIsVisiable=!0},saveImg(){var i=this.$refs["video-reader"].imgFile;if(i==""||i==null||i==null){this.$message.error("\u8BF7\u5148\u62CD\u7167");return}this.videoIndex==1?(this.fileList1=[],this.fileList1.push({raw:i})):(this.fileList2=[],this.fileList2.push({raw:i})),this.VideoDialogIsVisiable=!1}}},Y={class:"w-full"},J={class:"compare-box"},q={class:"left-img-container"},G=o("h3",null,"\u7B2C\u4E00\u5F20\u56FE\u7247",-1),H={key:0},K=["src"],M={class:"record-button"},Q={class:"mid-img-container"},Z=o("div",null,null,-1),$=_("\u6BD4\u5BF9"),ee=_("\u6E05\u7A7A"),ie={class:"right-img-container"},le=o("h3",null,"\u7B2C\u4E8C\u5F20\u56FE\u7247",-1),se={key:0,class:"imgshow"},oe=["src"],te={class:"record-button"},ne=_("\u662F\u5426\u4E3A\u4E00\u4E2A\u4EBA "),ae=_("\u6210\u7EE9: ");function re(i,l,ce,de,e,u){const g=d("IconPicture"),r=x,p=B,h=d("CameraIcon"),f=R,v=d("Loading"),L=d("SuccessFilled"),U=d("CircleCloseFilled"),I=d("el"),V=E,k=d("video-reader"),y=S;return n(),m(A,null,[o("div",Y,[o("div",J,[o("div",q,[G,s(p,{class:"img-button",ref:"upload",action:e.actionUrl,drag:"","file-list":e.fileList1,"onUpdate:file-list":l[0]||(l[0]=a=>e.fileList1=a),"list-type":"picture-card","show-file-list":!1,limit:1,"auto-upload":!1},{default:t(()=>[e.img1Url?(n(),m("div",H,[e.img1Url?(n(),m("img",{key:0,class:"imgshow",src:e.img1Url},null,8,K)):b("",!0)])):(n(),c(r,{key:1,class:"avatar-uploader-icon"},{default:t(()=>[s(g)]),_:1}))]),_:1},8,["action","file-list"]),o("div",M,[s(f,{type:"success",onClick:l[1]||(l[1]=a=>u.openVideo(1)),round:""},{default:t(()=>[s(r,null,{default:t(()=>[s(h)]),_:1})]),_:1})])]),o("div",Q,[Z,o("div",null,[s(f,{type:"primary",size:"large",onClick:u.compare},{default:t(()=>[$]),_:1},8,["onClick"])]),o("div",null,[s(f,{type:"danger",size:"large",onClick:u.clear},{default:t(()=>[ee]),_:1},8,["onClick"])])]),o("div",ie,[le,s(p,{class:"img-button",ref:"upload","list-type":"picture-card",action:e.actionUrl,drag:"","file-list":e.fileList2,"onUpdate:file-list":l[2]||(l[2]=a=>e.fileList2=a),"show-file-list":!1,limit:1,"auto-upload":!1},{default:t(()=>[e.img2Url?(n(),m("div",se,[e.img1Url?(n(),m("img",{key:0,src:e.img2Url},null,8,oe)):b("",!0)])):(n(),c(r,{key:1,class:"avatar-uploader-icon"},{default:t(()=>[s(g)]),_:1}))]),_:1},8,["action","file-list"]),o("div",te,[s(f,{type:"success",onClick:l[3]||(l[3]=a=>u.openVideo(2)),round:""},{default:t(()=>[s(r,null,{default:t(()=>[s(h)]),_:1})]),_:1})])])])]),j((n(),c(V,{modelValue:e.DialogIsVisiable,"onUpdate:modelValue":l[4]||(l[4]=a=>e.DialogIsVisiable=a),width:"200px",title:"\u6BD4\u5BF9\u7ED3\u679C",center:""},{default:t(()=>[o("div",null,[o("div",null,[o("div",null,[o("h3",null,[ne,e.loadingVisible?(n(),c(r,{key:0},{default:t(()=>[s(v)]),_:1})):e.result.is_same?(n(),c(r,{key:1,color:"#5bc194"},{default:t(()=>[s(L)]),_:1})):(n(),c(r,{key:2,color:"#fc5531"},{default:t(()=>[s(U)]),_:1}))])]),o("div",null,[o("h3",null,[ae,e.loadingVisible?(n(),c(r,{key:0},{default:t(()=>[s(v)]),_:1})):(n(),c(I,{key:1},{default:t(()=>[_(z(e.result.score),1)]),_:1}))])])])])]),_:1},8,["modelValue"])),[[y,e.loadingVisible]]),s(V,{modelValue:e.VideoDialogIsVisiable,"onUpdate:modelValue":l[6]||(l[6]=a=>e.VideoDialogIsVisiable=a),class:"dialog-center","lock-scroll":!1},{default:t(()=>[s(k,{onChooseImg:l[5]||(l[5]=a=>u.saveImg()),ref:"video-reader"},null,512)]),_:1},8,["modelValue"])],64)}var Ve=W(X,[["render",re]]);export{Ve as default};
//# sourceMappingURL=compareFace.78b1c7aa.js.map
