import{R as w,Z as k,c as b,U,Y as I,k as C}from"./elm.7e6b5792.js";import{bI as c,ag as d,o as u,g as p,h as l,a2 as t,X as i,F as g,ak as F,a0 as m,a1 as L}from"./vendor.9fab5538.js";import{h as O}from"./config.f6d607cf.js";import{V as y}from"./VideoReader.a7c299f2.js";import{_ as D}from"./index.a1960522.js";import"./lodash.8fc0361e.js";import"https://www.gstatic.com/firebasejs/9.8.4/firebase-app.js";import"https://www.gstatic.com/firebasejs/9.8.4/firebase-analytics.js";var A={data(){return{fileList2:[],actionUrl:O+"/findface",produce_result:{},dialogIsVisible:!1,isOpenFAS:!0,isOpenLandmarks:!0,VideoDialogIsVisiable:!1}},computed:{previewContent(){return{imgUrl:this.produce_result.imgUrl,names:this.produce_result.names.map(e=>e=="unknown"?"\u672A\u77E5":e)}}},components:{VideoReader:y,Plus:w},methods:{handleRemove(e,o){console.log(e),console.log(this.fileList2)},handlePreview(e){console.log(e),this.produce_result=e.response.data,this.dialogIsVisible=!0},async httpRequest(e){console.log(e);let o=new FormData;o.append("imgfile",e.file);var a=c({method:"post",url:e.action+"?isopenfas="+this.isOpenFAS+"&isopenlandmarks="+this.isOpenLandmarks,headers:{"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"*"},data:o});return a},handleRecord(){this.VideoDialogIsVisiable=!0},async uploadImg(){var e=this.$refs["video-reader"].imgUrl,o=this.$refs["video-reader"].imgFile;if(e==""||e==null||e==null){this.$message.error("\u8BF7\u5148\u62CD\u7167");return}if(o==""||o==null||o==null){this.$message.error("\u8BF7\u5148\u62CD\u7167");return}console.log(o);let a=new FormData;a.append("imgfile",o);var n=c({method:"post",url:this.actionUrl+"?isopenfas="+this.isOpenFAS+"&isopenlandmarks="+this.isOpenLandmarks,headers:{"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"*"},data:a});this.fileList2.push({name:"cut.png",percentage:0,status:"success",size:o.size,uid:0,url:e,response:{data:await n.then(r=>r.data)},raw:new File([o],"cut_img",{type:"image/png",lastModified:Date.now()})}),this.VideoDialogIsVisiable=!1}}};const R={class:"top-box"},S=m(" \u5F00\u542F\u6B3A\u8BC8\u8BC6\u522B"),E=m(" \u5F00\u542F\u5173\u952E\u70B9\u6807\u8BC6"),$=m("\u5F55\u5236 "),q=l("h3",null,"\u62D6\u62FD\u56FE\u7247\u5230\u8FD9",-1),B=l("h5",null,"- \u6216 -",-1),N=l("h3",null,"\u70B9\u6B64\u4E0A\u4F20",-1),P={class:"img-block"},T=["src"],z=l("span",null,"\u8BC6\u522B\u7ED3\u679C\u7531\u4ECE\u5DE6\u5230\u53F3\u6392\u5E8F\uFF0C\u5206\u522B\u4E3A",-1);function M(e,o){const a=k,n=d("VideoCamera"),r=b,h=C,_=d("el"),f=U,V=I,v=d("video-reader");return u(),p(g,null,[l("div",R,[l("h4",null,[S,t(a,{modelValue:e.isOpenFAS,"onUpdate:modelValue":o[0]||(o[0]=s=>e.isOpenFAS=s)},null,8,["modelValue"])]),l("h4",null,[E,t(a,{modelValue:e.isOpenLandmarks,"onUpdate:modelValue":o[1]||(o[1]=s=>e.isOpenLandmarks=s)},null,8,["modelValue"])]),t(h,{type:"success",class:"top-button",onClick:o[2]||(o[2]=s=>e.handleRecord())},{default:i(()=>[$,t(r,null,{default:i(()=>[t(n)]),_:1})]),_:1})]),l("div",null,[t(V,{class:"upload-demo",action:e.actionUrl,drag:"true",ref:"upload-ref","auto-upload":"true","http-request":e.httpRequest,"on-preview":e.handlePreview,"file-list":e.fileList2,"onUpdate:file-list":o[4]||(o[4]=s=>e.fileList2=s),"list-type":"picture"},{default:i(()=>[t(_,{class:"drag-item"},{default:i(()=>[q,B,N]),_:1}),t(f,{modelValue:e.dialogIsVisible,"onUpdate:modelValue":o[3]||(o[3]=s=>e.dialogIsVisible=s),"append-to-body":!0,"close-on-click-modal":!1,"lock-scroll":!0,class:"img-dialog"},{default:i(()=>[l("div",P,[l("img",{"w-full":"",src:e.previewContent.imgUrl},null,8,T),z,(u(!0),p(g,null,F(e.previewContent.names,s=>(u(),p("div",null,[l("span",null,L(s)+",",1)]))),256))])]),_:1},8,["modelValue"])]),_:1},8,["action","http-request","on-preview","file-list"])]),t(f,{modelValue:e.VideoDialogIsVisiable,"onUpdate:modelValue":o[6]||(o[6]=s=>e.VideoDialogIsVisiable=s)},{default:i(()=>[t(v,{onChooseImg:o[5]||(o[5]=s=>e.uploadImg()),ref:"video-reader"},null,512)]),_:1},8,["modelValue"])],64)}var Q=D(A,[["render",M]]);export{Q as default};
//# sourceMappingURL=findFace.e6ee2f2e.js.map
